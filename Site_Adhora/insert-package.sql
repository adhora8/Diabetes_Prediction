SET VERIFY OFF;
SET SERVEROUTPUT ON;


CREATE OR REPLACE PACKAGE iPack AS

	PROCEDURE DATA_INSERT(
	PID TESTSET.ID%TYPE,
	PURINATION TESTSET.URINATION%TYPE,
	PBLOOD_GLUCOSE_L TESTSET.BLOOD_GLUCOSE_L%TYPE,
	PWEIGHT_LOSS TESTSET.WEIGHT_LOSS%TYPE
	
);


END iPack;
/


CREATE OR REPLACE PACKAGE BODY iPack AS 
	PROCEDURE DATA_INSERT
	(
		PID TESTSET.ID%TYPE,
	    PURINATION  TESTSET.URINATION %TYPE,
		PBLOOD_GLUCOSE_L  TESTSET.BLOOD_GLUCOSE_L %TYPE,
		PWEIGHT_LOSS TESTSET.WEIGHT_LOSS%TYPE
		
	)
	IS

	BEGIN
		 INSERT INTO TESTSET (ID, URINATION, BLOOD_GLUCOSE_L,WEIGHT_LOSS) VALUES (PID, PURINATION , PBLOOD_GLUCOSE_L, PWEIGHT_LOSS);
		 COMMIT;

	END DATA_INSERT;
END iPack;
/

DECLARE
	TID TESTSET.ID%TYPE;
	TURINATION TESTSET.URINATION%TYPE;
	TBLOOD_GLUCOSE_L TESTSET.BLOOD_GLUCOSE_L%TYPE;
	TWEIGHT_LOSS TESTSET.WEIGHT_LOSS%TYPE;
	

	NEGATIVE_VALUE EXCEPTION;
	INVALID_URINATION EXCEPTION;
	INVALID_BLOOD_GLUCOSE_L EXCEPTION;
	INVALID_WEIGHT_LOSS EXCEPTION;
	

BEGIN


	
	TID := &ID;
	TURINATION := '&URINATION';
	TBLOOD_GLUCOSE_L := '&BLOOD_GLUCOSE_L';
	TWEIGHT_LOSS := '&WEIGHT_LOSS';




	IF TID<0 THEN
		RAISE NEGATIVE_VALUE;
	END IF;

	IF NOT (TURINATION ='frequent' or TURINATION = 'normal' or TURINATION = 'irregular') THEN
		RAISE INVALID_URINATION;
	END IF;

	IF NOT (TBLOOD_GLUCOSE_L ='high' or TBLOOD_GLUCOSE_L = 'low' or TBLOOD_GLUCOSE_L = 'borderline') THEN
		RAISE INVALID_BLOOD_GLUCOSE_L ;
	END IF;

	IF NOT (TWEIGHT_LOSS<>'sudden' or TWEIGHT_LOSS <> 'planned') THEN
		RAISE INVALID_WEIGHT_LOSS;
	END IF;

	iPack.DATA_INSERT(TID, TURINATION, TBLOOD_GLUCOSE_L, TWEIGHT_LOSS);


	COMMIT;

	EXCEPTION
		WHEN NEGATIVE_VALUE THEN
			DBMS_OUTPUT.PUT_LINE('ID CANNOT BE NEGATIVE VALUE');
		WHEN INVALID_URINATION THEN
			DBMS_OUTPUT.PUT_LINE('Enter either frequent or normal or irregular in urination');
		WHEN INVALID_BLOOD_GLUCOSE_L THEN
			DBMS_OUTPUT.PUT_LINE('Enter either high or low or borderline in blood_glucose_level');
		WHEN INVALID_WEIGHT_LOSS THEN
			DBMS_OUTPUT.PUT_LINE('Enter either sudden or plannes in weight_loss');
		

END;
/
