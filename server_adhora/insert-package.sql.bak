SET VERIFY OFF;
SET SERVEROUTPUT ON;


CREATE OR REPLACE PACKAGE INSERT_PACK AS

	PROCEDURE DATA_INSERT(
	PID DATASET.ID%TYPE,
	PURINATION DATASET.URINATION%TYPE,
	PBLOOD_GLUCOSE_L DATASET.BLOOD_GLUCOSE_L%TYPE,
	PWEIGHT_LOSS DATASET.WEIGHT_LOSS%TYPE,
	PDIABETES_RESULT DATASET.DIABETES_RESULT%TYPE
);


END INSERT_PACK;
/


CREATE OR REPLACE PACKAGE BODY INSERT_PACK AS 
	PROCEDURE DATA_INSERT
	(
		PID DATASET.ID%TYPE,
		PURINATION DATASET.URINATION%TYPE,
		PBLOOD_GLUCOSE_L DATASET.BLOOD_GLUCOSE_L%TYPE,
		PWEIGHT_LOSS DATASET.WEIGHT_LOSS%TYPE,
		PDIABETES_RESULT DATASET.DIABETES_RESULT%TYPE
	)
	IS

	BEGIN
		 INSERT INTO DATASET (ID, URINATION, BLOOD_GLUCOSE_L,WEIGHT_LOSS,DIABETES_RESULT) VALUES (PID, PURINATION, PBLOOD_GLUCOSE_L, PWEIGHT_LOSS,PDIABETES_RESULT);
		 DBMS_OUTPUT.PUT_LINE('Data inserted');
		 COMMIT;

	END DATA_INSERT;
END INSERT_PACK;
/

DECLARE
		TID DATASET.ID%TYPE;
		TURINATION DATASET.URINATION%TYPE;
		TBLOOD_GLUCOSE_L DATASET.BLOOD_GLUCOSE_L%TYPE;
		TWEIGHT_LOSS DATASET.WEIGHT_LOSS%TYPE;
		TDIABETES_RESULT DATASET.DIABETES_RESULT%TYPE;

		NEGATIVE_VALUE EXCEPTION;
		INVALID_URINATION EXCEPTION;
		INVALID_BLOOD_GLUCOSE_L EXCEPTION;
		INVALID_WEIGHT_LOSS EXCEPTION;
		INVALID_DIABETES_RESULT EXCEPTION;

BEGIN


	
	TID := &ID;
	TURINATION := '&URINATION';
	TBLOOD_GLUCOSE_L := '&BLOOD_GLUCOSE_L';
	TWEIGHT_LOSS := '&WEIGHT_LOSS';
	TDIABETES_RESULT := '&DIABETES_RESULT';





	IF TID<0 THEN
		RAISE NEGATIVE_VALUE;
	END IF;

	IF NOT (TURINATION ='frequent' or TURINATION = 'normal' or TURINATION = 'irregular') THEN
		RAISE INVALID_URINATION;
	END IF;

	IF NOT (TBLOOD_GLUCOSE_L ='high' or TBLOOD_GLUCOSE_L = 'low' or TBLOOD_GLUCOSE_L = 'borderline') THEN
		RAISE INVALID_BLOOD_GLUCOSE_L;
	END IF;

	IF NOT (TWEIGHT_LOSS<>'sudden' or TWEIGHT_LOSS <> 'planned') THEN
		RAISE INVALID_WEIGHT_LOSS;
	END IF;

	IF NOT (TDIABETES_RESULT = 'yes' or TDIABETES_RESULT = 'no') THEN
		RAISE INVALID_DIABETES_RESULT;
	END IF;

	INSERT_PACK.DATA_INSERT(TID, TURINATION, TBLOOD_GLUCOSE_L, TWEIGHT_LOSS, TDIABETES_RESULT);


	COMMIT;

	EXCEPTION
		WHEN NEGATIVE_VALUE THEN
			DBMS_OUTPUT.PUT_LINE('ID CANNOT BE NEGATIVE VALUE');
		WHEN INVALID_URINATION THEN
			DBMS_OUTPUT.PUT_LINE('Enter either frequent or normal or irregular in urination');
		WHEN INVALID_BLOOD_GLUCOSE_L THEN
			DBMS_OUTPUT.PUT_LINE('Enter either high or low or borderline in blood_glucose_level');
		WHEN INVALID_WEIGHT_LOSS THEN
			DBMS_OUTPUT.PUT_LINE('Enter either sudden or planned in weight_loss');
		WHEN INVALID_DIABETES_RESULT_RESULT THEN
			DBMS_OUTPUT.PUT_LINE('Enter either yes or no in diabetes_result');

END;
/
